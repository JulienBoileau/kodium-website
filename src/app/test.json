{
    "name": "Publish Article from Notion",
    "nodes": [
      {
        "id": "1",
        "name": "Webhook",
        "type": "n8n-nodes-base.webhook",
        "typeVersion": 1,
        "position": [300, 300],
        "parameters": {
          "httpMethod": "POST",
          "path": "publish-article",
          "responseMode": "onLastNode",
          "responseData": "firstEntryJson",
          "options": {
            "responseCode": 200
          }
        }
      },
      {
        "id": "2",
        "name": "Get Page from Notion",
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.3,
        "position": [600, 300],
        "parameters": {
          "url": "https://api.notion.com/v1/pages/{{$json.id}}",
          "method": "GET",
          "options": {
            "response": {
              "responseFormat": "json"
            }
          },
          "headerParametersJson": "={\n  \"Authorization\": \"Bearer {{YOUR_NOTION_SECRET}}\",\n  \"Notion-Version\": \"2022-06-28\"\n}"
        }
      },
      {
        "id": "3",
        "name": "Extract Data",
        "type": "n8n-nodes-base.function",
        "typeVersion": 2,
        "position": [900, 300],
        "parameters": {
          "functionCode": "const p = $json.properties;\n\nreturn [{\n  json: {\n    id: $json.id,\n    title: p['Titre']?.title?.[0]?.plain_text || '',\n    content: p['Contenu (Markdown)']?.rich_text?.map(t => t.plain_text).join('\\n') || '',\n    metaTitle: p['Meta Titre']?.rich_text?.[0]?.plain_text || '',\n    metaDescription: p['Meta Description']?.rich_text?.[0]?.plain_text || '',\n    keywords: p['Mots-clés']?.multi_select?.map(k => k.name) || [],\n    image: p['Image']?.files?.[0]?.external?.url || null,\n    date: p['Date']?.date?.start || null,\n    source: p['Source']?.url || null,\n    status: p['Statut']?.select?.name || 'Non défini'\n  }\n}];"
        }
      },
      {
        "id": "4",
        "name": "Respond to Webhook",
        "type": "n8n-nodes-base.respondToWebhook",
        "typeVersion": 1,
        "position": [1200, 300],
        "parameters": {
          "responseMode": "onReceived",
          "responseBody": "={ $json }",
          "options": {
            "responseCode": 200
          }
        }
      }
    ],
    "connections": {
      "Webhook": {
        "main": [
          [
            {
              "node": "Get Page from Notion",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Get Page from Notion": {
        "main": [
          [
            {
              "node": "Extract Data",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Extract Data": {
        "main": [
          [
            {
              "node": "Respond to Webhook",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    ],
    "settings": {
      "executionOrder": "v1"
    },
    "pinData": {},
    "id": "publish-article",
    "meta": {
      "templateCredsSetupCompleted": true
    }
  }
  